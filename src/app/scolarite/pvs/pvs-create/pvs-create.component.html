<div class="container-fluid" style="background-color: darkslategrey">
  <div class="card" style="background-color: lightgray">
    <div class="container ">
      <div class="card shadow p-3 mb-5 bg-white rounded">
        <div class=" card-header card-text fa fa-pencil" align="center"><B>AJOUTER PV</B></div>
        <div class="card-body">
          <div class="form-group">
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>FILE</b></span></div>
                <div class="custom-file">
                  <input type="file" class="custom-file-input" [(ngModel)]="pvCreate.path" required/>
                  <label class="custom-file-label">{{pvCreate.path}}</label>
                </div>
              </div>
              <br>
              <div class="input-group input-group w-100">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>Filiere</b></span></div>
                <input type="text" class="form-control " placeholder="Col debut des donnees"
                       [(ngModel)]="pvCreate.refFiliere"
                />
              </div>
              <br>
              <div class="input-group input-group w-100">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>Semestre</b></span></div>
                <input type="text" class="form-control " placeholder="Col debut des donnees"
                       [(ngModel)]="pvCreate.refSemestre"
                />
              </div>
              <br>
              <div class="input-group input-group w-100">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>Annee</b></span></div>
                <input type="text" class="form-control " placeholder="Col debut des donnees"
                       [(ngModel)]="pvCreate.annee"
                />
              </div>
            </div>
            <div class="form-inline">
              <div class="input-group input-group-sm w-50">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>START COL</b></span></div>
                <input type="text" class="form-control " placeholder="Col debut des donnees"
                       [(ngModel)]="pvCreate.startCol"
                       [disabled]="pvCreate.checkBoxState == false"/>
              </div>
              <div class="input-group input-group-sm w-50">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>LINE</b></span></div>
                <input type="text" class="form-control " placeholder="Ligne debut de lecture"
                       [(ngModel)]="pvCreate.line"
                       [disabled]="pvCreate.checkBoxState == false"/>
              </div>
              <br>
              <div class="input-group input-group-sm w-50">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>MODS LINE</b></span></div>
                <input type="text" class="form-control " placeholder="ligne debut des modules"
                       [(ngModel)]="pvCreate.modsLine"
                       [disabled]="pvCreate.checkBoxState == false"/>
              </div>

              <div class="input-group input-group-sm w-50">
                <div class="input-group-prepend"><span align="center" class="input-group-text"
                                                       style="width: 90px"><b>MODS COL</b></span></div>
                <input type="text" class="form-control " placeholder="Col debut des modules"
                       [(ngModel)]="pvCreate.modsCol"
                       [disabled]="pvCreate.checkBoxState == false"/>
              </div>
              <br>
              <br>
              <br>
              <span align="center" class="input-group-text"
                    style="width: 150px; background-color: snow; font-style: revert">
            <input type="checkbox"
                   [(ngModel)]="pvCreate.checkBoxState"/><b>ENABLE INPUTS</b></span>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-info btn-block btn-lg fa fa-upload" style="background-color: teal;"
                    (click)="create()"><b>Upload</b>
            </button>
          </div>
        </div>
        <div class="card-footer">
          <div class="form-inline align-content-center">
            <div>
              <button id="download" (click)="saveAll()" class="btn btn-outline">
                <span style="color: dodgerblue" class="fa fa-save"> </span>
                <span class="text-secondary"> SAVE DANS LA BASE DE DONNEES </span>
              </button>
            </div>
            <div>
              <button (click)="deleteAll()" style="" class="btn btn-outline text-secondary"><span
                class="fa text-primary fa-trash-o"></span> VIDER LA LISTE
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card shadow p-3 mb-5 rounded" style="background-color: lightgray">
      <ngx-spinner
        bdColor="rgba(51,51,51,0.8)"
        size="medium"
        color="#fff"
        type="ball-scale-multiple">
        <p style="font-size: 20px; color: white"><b>Please wait..</b></p>
      </ngx-spinner>
      <div class="card-header card-text fa fa-list" align="center"><b> Liste des notes </b></div>
      <div class="card-body">
        <div class="table-wrapper-scroll-y my-custom-scrollbar">
          <table class="table table-sm table-bordered table-hover table-striped ">
            <thead class="thead" style="background-color: teal">
            <tr>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">CNE</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">NOM</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">PRENOM</th>
              <th *ngFor="let n of modules" rowspan="1" colspan="3" align="center"
                  style="width: auto; text-align:center; color:white">{{ n }}
              </th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">TOTAL</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">MOY.</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">NMV.</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">RES.</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">ETAT</th>
              <th rowspan="2" colspan="1" style="width: auto; text-align:center; color:white">ACTIONS</th>
            </tr>
            <tr>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
              <th style="width: auto; text-align:center; color:white">ptJury</th>
              <th style="width: auto; text-align:center; color:white">NOTE</th>
              <th style="width: auto; text-align:center; color:white">RES</th>
            </tr>
            </thead>
            <tbody *ngFor="let p of pvs; let id = index" [ngClass]="{'negative': p.state == 'Good', 'noteorange': p.state == 'error'}">
            <tr>
              <td contenteditable="true" (keyup)="updateList(id, 'refEtudiant', $event)">{{ p.refEtudiant }}</td>
              <td>{{ p.nom }}</td>
              <td>{{ p.prenom }}</td>
              <ng-container *ngFor="let m of p.noteModulaireVos; let j = index">
                <td contenteditable="true" (keyup)="updateInternList(id, j, 'ptJury', $event)">{{ m.ptJury }}</td>
                <td contenteditable="true" (keyup)="updateInternList(id, j, 'mention', $event)">{{ m.mention }}</td>
                <td contenteditable="true" (keyup)="updateInternList(id, j, 'etat', $event)">{{ m.etat }}</td>
              </ng-container>
              <td contenteditable="true" (keyup)="updateList(id, 'total', $event)">{{ p.total }}</td>
              <td contenteditable="true" (keyup)="updateList(id, 'note', $event)">{{ p.note }}</td>
              <td contenteditable="true" (keyup)="updateList(id, 'nbrModuleValide', $event)">{{ p.nbrModuleValide }}
              </td>
              <td contenteditable="true" (keyup)="updateList(id, 'etat', $event)">{{ p.etat }}</td>
              <td>{{ p.state }}</td>
              <td>
                <button type="button" class="btn btn-primary btn-sm fa fa-edit" data-toggle="modal"
                        data-target="#exampleModalCenter"></button>
                <button type="button" class="btn btn-danger btn-sm fa fa-trash" (click)="deleteItem(n)"></button>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>




